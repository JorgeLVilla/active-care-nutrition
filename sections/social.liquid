{%- liquid
  assign enable_section = false

  if template == 'index' and section.settings.enable_home
    assign enable_section = true
  endif

   if page.handle contains 'about-us' or page.handle contains 'bundle-save'
    assign enable_section = true
  endif

  if template contains 'product' and section.settings.enable_product
    assign enable_section = true
  endif

  if template contains 'collection' and section.settings.enable_collection
    assign enable_section = true
  endif
-%}

{%- if enable_section -%}
  {%- assign grid_item_width = 'grid-product--medium' -%}

  <div class="index-section social-section">
    <div
      id="SocialReviews-{{ section.id }}"
      data-section-id="{{ section.id }}"
      data-section-type="featured-collection"
      data-scrollable="true"
      data-product-sliders-mobile="false"
      data-paginate="false">
      {%- if section.settings.title != blank -%}
        <div class="page-width">
          <header class="socil-hd section-header" data-aos>
            <h2 class="section-header__title appear-delay">
              {{ section.settings.title }}
            </h2>
            {%- if section.settings.description != blank -%}
              <div class="rte section-header__description section-header__description--large appear-delay-1">
                <svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M12.862 16.1974C15.6745 16.1974 17.9545 14.0474 17.9545 11.3951C17.9545 8.74285 15.6745 6.59277 12.862 6.59277C10.0495 6.59277 7.76953 8.74285 7.76953 11.3951C7.76953 14.0474 10.0495 16.1974 12.862 16.1974Z" fill="#6A6A6A"/> <path d="M18.9328 0.0652105C15.8981 -0.0132733 9.82394 -0.0132733 6.7892 0.0652105C5.20994 0.106099 3.41961 0.476839 2.29441 1.61019C1.12517 2.78827 0.683336 4.21159 0.638522 5.80386C0.559758 8.59854 0.638522 16.9866 0.638522 16.9866C0.689835 18.5787 1.12517 20.0022 2.29441 21.1803C3.41961 22.314 5.20994 22.6844 6.7892 22.7253C9.82394 22.8038 15.8981 22.8038 18.9328 22.7253C20.5121 22.6844 22.3024 22.3136 23.4276 21.1803C24.5968 20.0022 25.0387 18.5789 25.0835 16.9866V5.80386C25.0387 4.21159 24.5968 2.78827 23.4276 1.61019C22.302 0.476473 20.5117 0.106099 18.9328 0.0652105ZM12.8606 18.8389C11.2995 18.8389 9.77335 18.4023 8.47529 17.5844C7.17724 16.7665 6.16552 15.6039 5.56809 14.2438C4.97066 12.8836 4.81435 11.387 5.11891 9.94306C5.42348 8.49914 6.17525 7.17282 7.27916 6.13181C8.38307 5.0908 9.78953 4.38186 11.3207 4.09465C12.8519 3.80744 14.439 3.95485 15.8813 4.51824C17.3236 5.08163 18.5564 6.03569 19.4237 7.25979C20.2911 8.48388 20.754 9.92303 20.754 11.3952C20.754 13.3694 19.9224 15.2627 18.4421 16.6587C16.9618 18.0546 14.9541 18.8389 12.8606 18.8389ZM20.7876 5.4881C20.4753 5.48802 20.1702 5.40065 19.9106 5.23702C19.651 5.0734 19.4488 4.84086 19.3293 4.56883C19.2099 4.29679 19.1787 3.99747 19.2397 3.70871C19.3006 3.41995 19.451 3.15472 19.6718 2.94656C19.8926 2.73839 20.1739 2.59664 20.4801 2.53923C20.7863 2.48182 21.1037 2.51132 21.3922 2.62401C21.6806 2.7367 21.9271 2.92751 22.1006 3.17232C22.274 3.41713 22.3666 3.70495 22.3666 3.99937C22.3666 4.19491 22.3258 4.38852 22.2464 4.56917C22.1671 4.74981 22.0507 4.91394 21.9041 5.05219C21.7575 5.19043 21.5834 5.30008 21.3918 5.37488C21.2002 5.44967 20.9949 5.48814 20.7876 5.4881Z" fill="#D9D9D9"/> </svg>
                {{ section.settings.description }}
              </div>
            {%- endif -%}
          </header>
        </div>
      {%- endif -%}

      <div class="overflow-scroll-wrap">
        <button
          type="button"
          class="btn btn--tertiary overflow-scroller__arrow overflow-scroller__arrow--left overflow-scroller--disable-left small--hide"
          aria-hidden="true"
          aria-label="{{ 'general.pagination.previous' | t }}"
          data-arrow>
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-left" viewBox="0 0 284.49 498.98"><path d="M249.49 0a35 35 0 0 1 24.75 59.75L84.49 249.49l189.75 189.74a35.002 35.002 0 1 1-49.5 49.5L10.25 274.24a35 35 0 0 1 0-49.5L224.74 10.25A34.89 34.89 0 0 1 249.49 0z"/></svg>
        </button>
        <button
          type="button"
          class="btn btn--tertiary overflow-scroller__arrow overflow-scroller__arrow--right small--hide"
          aria-hidden="true"
          aria-label="{{ 'general.pagination.next' | t }}"
          data-arrow>
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-chevron-right" viewBox="0 0 284.49 498.98"><path d="M35 498.98a35 35 0 0 1-24.75-59.75l189.74-189.74L10.25 59.75a35.002 35.002 0 0 1 49.5-49.5l214.49 214.49a35 35 0 0 1 0 49.5L59.75 488.73A34.89 34.89 0 0 1 35 498.98z"/></svg>
        </button>

        {%- assign count = 10 -%}
        <div
          class="overflow-scroller overflow-scroller--smaller"
          data-pagination-wrapper>
          <div
            class="grid grid--uniform social-section__grid"
            data-aos="overflow__animation">

            {%- if section.blocks.size == 0 -%}
              {%- for i in (1..8) -%}
                <div class="grid__item {{ grid_item_width }}">
                  {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}

                  <div class="social-section__wrapper">
                    <div class="image-wrap">{{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}</div>
                    <div class="social-section__meta">
                      <div class="social-section__likes">
                        {{ i }} likes
                      </div>
                      <div class="social-section__caption">
                        <svg width="62" height="62" viewBox="0 0 62 62" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M31 37.5102C34.5954 37.5102 37.51 34.5956 37.51 31.0002C37.51 27.4049 34.5954 24.4902 31 24.4902C27.4046 24.4902 24.49 27.4049 24.49 31.0002C24.49 34.5956 27.4046 37.5102 31 37.5102Z" fill="white"/> <path d="M31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0ZM50.1528 38.879C50.004 41.8262 49.1758 44.7325 47.028 46.8575C44.8594 49.0027 41.9393 49.802 38.9636 49.9493H23.0365C20.0605 49.802 17.1408 49.0032 14.9721 46.8575C12.8242 44.7325 11.9961 41.8262 11.8473 38.879V23.121C11.9961 20.1738 12.8243 17.2675 14.9721 15.1424C17.1408 12.9972 20.0608 12.1979 23.0365 12.0507H38.9635C41.9395 12.1979 44.8592 12.9968 47.0279 15.1424C49.1758 17.2675 50.0039 20.1738 50.1527 23.121L50.1528 38.879Z" fill="white"/> <path d="M38.7623 15.6413C34.8829 15.5349 27.118 15.5349 23.2385 15.6413C21.2197 15.6967 18.931 16.1993 17.4926 17.7357C15.9979 19.3327 15.4331 21.2621 15.3758 23.4206C15.2751 27.209 15.3758 38.5798 15.3758 38.5798C15.4414 40.7381 15.9979 42.6677 17.4926 44.2647C18.931 45.8016 21.2197 46.3037 23.2385 46.3591C27.118 46.4655 34.8829 46.4655 38.7623 46.3591C40.7812 46.3037 43.0698 45.8011 44.5082 44.2647C46.0029 42.6677 46.5678 40.7383 46.625 38.5798V23.4206C46.5678 21.2621 46.0029 19.3327 44.5082 17.7357C43.0693 16.1988 40.7807 15.6967 38.7623 15.6413ZM30.9999 41.0907C29.0042 41.0907 27.0533 40.4989 25.3939 39.3901C23.7346 38.2814 22.4412 36.7055 21.6775 34.8617C20.9138 33.0179 20.714 30.989 21.1033 29.0316C21.4927 27.0743 22.4537 25.2763 23.8649 23.8651C25.276 22.454 27.074 21.4929 29.0314 21.1036C30.9887 20.7142 33.0176 20.9141 34.8614 21.6778C36.7052 22.4415 38.2811 23.7348 39.3899 25.3942C40.4986 27.0536 41.0904 29.0045 41.0904 31.0002C41.0904 33.6764 40.0273 36.2429 38.135 38.1353C36.2427 40.0276 33.6761 41.0907 30.9999 41.0907ZM41.1333 22.9925C40.7342 22.9924 40.3441 22.874 40.0123 22.6522C39.6805 22.4304 39.4219 22.1152 39.2692 21.7464C39.1165 21.3776 39.0766 20.9719 39.1546 20.5804C39.2325 20.189 39.4247 19.8294 39.707 19.5472C39.9893 19.2651 40.3488 19.0729 40.7403 18.9951C41.1318 18.9172 41.5375 18.9572 41.9062 19.11C42.275 19.2628 42.5901 19.5214 42.8119 19.8533C43.0336 20.1852 43.1519 20.5753 43.1519 20.9744C43.1519 21.2395 43.0997 21.502 42.9983 21.7468C42.8968 21.9917 42.7481 22.2142 42.5607 22.4016C42.3732 22.589 42.1507 22.7377 41.9058 22.8391C41.6609 22.9404 41.3984 22.9926 41.1333 22.9925Z" fill="white"/> </svg>
                        <strong>@youraccount</strong>
                        Showcase images from your social accounts
                      </div>
                    </div>
                  </div>
                </div>
              {%- endfor -%}
            {%- endif -%}

            {% comment %}
              When on product page, check if any social blocks match the current product
            {% endcomment %}
            {%- assign social_product_blocks = '' -%}
            {%- assign social_blocks = '' -%}

            {%- for block in section.blocks -%}
              {%- assign prod = all_products[block.settings.product] -%}

              {%- if
                template contains 'product' and
                block.settings.product != blank and
                block.settings.product == product.handle -%}

                {%- capture social_product_blocks -%}
                  {{ social_product_blocks }}

                  {%- render 'social-post',
                    block: block,
                    grid_item_width: grid_item_width,
                    image: block.settings.image,
                    link: block.settings.link,
                    prod: prod,
                    caption: block.settings.caption,
                    account: block.settings.account,
                    likes: block.settings.likes -%}
                {%- endcapture -%}

              {%- else -%}
                {%- capture social_blocks -%}
                  {{ social_blocks }}

                  {%- render 'social-post',
                    block: block,
                    grid_item_width: grid_item_width,
                    image: block.settings.image,
                    link: block.settings.link,
                    prod: prod,
                    caption: block.settings.caption,
                    account: block.settings.account,
                    likes: block.settings.likes -%}
                {%- endcapture -%}
              {%- endif -%}

            {%- endfor -%}

            {%- if social_product_blocks != blank -%}
              {{ social_product_blocks }}
            {%- endif -%}
            {%- if social_blocks != blank -%}
              {{ social_blocks }}
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </div>
{% endif %}
<style>
  .socil-hd .rte.section-header__description p {display: inline-block;vertical-align: middle;}
  .socil-hd .rte.section-header__description p a{font-weight:bold;text-decoration:none!important;}
  .socil-hd .rte.section-header__description svg{vertical-align: middle;}
  div#SocialReviews-social {padding-top: 80px;}
  #SocialReviews-social .overflow-scroller.overflow-scroller--smaller {padding-bottom: 30px!important;}
  .site-footer__section.site-footer__content, .site-footer__section {padding-top: 45px;}{
</style>
                          
{% schema %}
{
  "name": "t:sections.social.name",
  "max_blocks": 20,
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_home",
      "label": "t:sections.social.settings.enable_home.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_product",
      "label": "t:sections.social.settings.enable_product.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_collection",
      "label": "t:sections.social.settings.enable_collection.label"
    },
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.social.settings.title.label",
      "default": "On social"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "t:sections.social.settings.description.label",
      "default": "<p>Send us yours <a href=\"https://instagram.com/youraccount/\">@youraccount</a></p>"
    }
  ],
  "blocks": [
    {
      "type": "post",
      "name": "t:sections.social.blocks.social_post.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.social.blocks.social_post.settings.image.label"
        },
        {
          "type": "text",
          "id": "link",
          "label": "t:sections.social.blocks.social_post.settings.link.label"
        },
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.social.blocks.social_post.settings.product.label"
        },
        {
          "type": "header",
          "content": "t:sections.social.blocks.social_post.settings.header_post_details"
        },
        {
          "type": "text",
          "id": "account",
          "label": "t:sections.social.blocks.social_post.settings.account.label"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "t:sections.social.blocks.social_post.settings.caption.label"
        },
        {
          "type": "text",
          "id": "likes",
          "label": "t:sections.social.blocks.social_post.settings.likes.label"
        }
      ]
    }
  ]
}
{% endschema %}
